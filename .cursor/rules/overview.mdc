---
description: Quick orientation for Carinya Parc - read docs/ for detail
globs:
alwaysApply: true
---

# Carinya Parc – Overview

You are working on **Carinya Parc**, a Next.js v16 App Router website for a regenerative farm in NSW, Australia.

## MUST READ FIRST

Before proposing any code or doc changes, skim these files:

- `docs/agents.md` – Commands, checks, conventions, and expectations for agents.
- `docs/structure.md` – Where routes, components, hooks, tests, and docs live.
- `docs/tech.md` – Stack, tools, versions, and constraints.
- `docs/product.md` – Product purpose, personas, value prop, and non-goals.

**Treat these docs as authoritative.** If code and docs disagree, that's a bug—fix it.

## Stack at a glance

- **Framework**: Next.js 16.0.4 (App Router), React 19, TypeScript 5.9
- **Styling**: Tailwind CSS 4, shared `@repo/ui` components
- **Content**: MDX files (`apps/site/content/`)
- **Testing**: Vitest (unit, integration, smoke, security tests)
- **Package manager**: pnpm + Turborepo
- **Node**: 22.17.0+
- **Hosting**: Vercel (assumption)

## Quick commands (from repo root)

```bash
pnpm install                 # Install dependencies
pnpm dev                     # Start all dev servers
pnpm site:dev                # Start site dev server only
pnpm build                   # Build all packages
pnpm lint                    # Lint
pnpm format                  # Format code
pnpm typecheck               # TypeScript check
pnpm test                    # All tests
pnpm test:unit               # Unit tests only
pnpm test:smoke              # Smoke tests only
```

## Pre-flight checks (MUST pass before marking work done)

- ✓ `pnpm lint`
- ✓ `pnpm test:unit`
- ✓ `pnpm test:smoke` (if routes/layouts/forms changed)
- ✓ `pnpm typecheck`

Treat failures as ✗ blockers, not warnings.

## Key conventions

### Code style

- **TypeScript only** (`.ts` / `.tsx`)
- **Function components** only (no classes)
- **Server components by default**; use `"use client"` sparingly
- **Tailwind utilities** for styling; use `@repo/ui` components where possible
- **Import aliases**: `@/components/*`, `@/lib/*`, `@/hooks/*`, `@repo/ui/*` (see `apps/site/tsconfig.json`)

### Naming

- **Routes**: kebab-case folders (`the-property`, `[post]`)
- **Components**: PascalCase files and exports (`HeroSection.tsx`)
- **Hooks**: `useSomething` with kebab-case files (`use-mobile.ts`)
- **Tests**: `.test.ts` / `.test.tsx` mirroring source structure

### File placement

- Routes → `apps/site/src/app/`
- Components → `apps/site/src/components/sections/`, `forms/`, `ui/`
- Hooks → `apps/site/src/hooks/`
- Utils/lib → `apps/site/src/lib/`, `apps/site/src/utils/`
- Tests → `apps/site/__tests__/unit/`, `integration/`, `smoke/`, `security/`
- Content → `apps/site/content/posts/`, `recipes/`, `legal/`

## Documentation expectations

When you change behaviour, architecture, or add features:

- Update `docs/product.md` if user-facing features or flows change.
- Update `docs/tech.md` if stack, tools, or integrations change.
- Update `docs/structure.md` if routing or project layout changes.
- Update `docs/agents.md` if commands or conventions change.

**Always keep docs in sync with code.** Use symbols: ✓ (pass), ✗ (fail/blocker), ! (alert), - (neutral), + (new).

## Symbols & tone

- ✓ Success, passed check, confirmed decision
- ✗ Failure, blocker, anti-pattern
- ! Important alert or gotcha
- \- Neutral note
- \+ New change or addition

Use **Australian English** spelling throughout.

## Security

- **Never commit secrets** (API keys, tokens, DSNs) → use `.env.local` or Vercel env vars.
- Collect minimal data (mainly newsletter emails).
- Honour privacy policy in `apps/site/content/legal/`.

## Performance & accessibility

- Prefer static generation and server components.
- Optimise images via Next.js `<Image>` and `pnpm optimize-images`.
- Use semantic HTML and accessible patterns from `@repo/ui`.
- Ensure keyboard access and visible focus states.
- Maintain metadata for SEO.

## Change scope & PRs

- Keep diffs **small and focused** (one feature or bug per change).
- Run all checks before marking work complete.
- Update tests and docs alongside code.
- Explain **why** decisions were made (especially UX, performance, data).

## When in doubt

1. Check `docs/agents.md` for commands and checks.
2. Check `docs/structure.md` for where files go.
3. Check `docs/product.md` for whether a feature fits the product vision.
4. Prefer **clarity over cleverness**, **honest over glossy**, **simple over premature abstraction**.

---

**Read `docs/` for full detail. This is a quick-start only.**
